{"ast":null,"code":"import * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from './date-time-picker-intl.service';\nimport * as ɵngcc2 from './adapter/date-time-adapter.class';\nimport * as ɵngcc3 from './timer-box.component';\nimport * as ɵngcc4 from '@angular/common';\n\nfunction OwlTimerComponent_owl_date_time_timer_box_2_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r3 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"owl-date-time-timer-box\", 1);\n    ɵngcc0.ɵɵlistener(\"inputChange\", function OwlTimerComponent_owl_date_time_timer_box_2_Template_owl_date_time_timer_box_inputChange_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r3);\n      var ctx_r2 = ɵngcc0.ɵɵnextContext();\n      return ctx_r2.setSecondValue($event);\n    })(\"valueChange\", function OwlTimerComponent_owl_date_time_timer_box_2_Template_owl_date_time_timer_box_valueChange_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r3);\n      var ctx_r4 = ɵngcc0.ɵɵnextContext();\n      return ctx_r4.setSecondValue($event);\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"showDivider\", true)(\"upBtnAriaLabel\", ctx_r0.upSecondButtonLabel)(\"downBtnAriaLabel\", ctx_r0.downSecondButtonLabel)(\"upBtnDisabled\", !ctx_r0.upSecondEnabled())(\"downBtnDisabled\", !ctx_r0.downSecondEnabled())(\"value\", ctx_r0.secondValue)(\"min\", 0)(\"max\", 59)(\"step\", ctx_r0.stepSecond)(\"inputLabel\", \"Second\");\n  }\n}\n\nfunction OwlTimerComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r6 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"div\", 4)(1, \"button\", 5);\n    ɵngcc0.ɵɵlistener(\"click\", function OwlTimerComponent_div_3_Template_button_click_1_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r6);\n      var ctx_r5 = ɵngcc0.ɵɵnextContext();\n      return ctx_r5.setMeridiem($event);\n    });\n    ɵngcc0.ɵɵelementStart(2, \"span\", 6);\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    var ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r1.hour12ButtonLabel);\n  }\n}\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __metadata = this && this.__metadata || function (k, v) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport { ChangeDetectionStrategy, ChangeDetectorRef, Component, ElementRef, EventEmitter, HostBinding, Input, NgZone, Optional, Output } from '@angular/core';\nimport { OwlDateTimeIntl } from './date-time-picker-intl.service';\nimport { DateTimeAdapter } from './adapter/date-time-adapter.class';\nimport { take } from 'rxjs/operators';\n\nvar OwlTimerComponent = function () {\n  function OwlTimerComponent(ngZone, elmRef, pickerIntl, cdRef, dateTimeAdapter) {\n    this.ngZone = ngZone;\n    this.elmRef = elmRef;\n    this.pickerIntl = pickerIntl;\n    this.cdRef = cdRef;\n    this.dateTimeAdapter = dateTimeAdapter;\n    this.isPM = false;\n    this.stepHour = 1;\n    this.stepMinute = 1;\n    this.stepSecond = 1;\n    this.selectedChange = new EventEmitter();\n  }\n\n  Object.defineProperty(OwlTimerComponent.prototype, \"pickerMoment\", {\n    get: function get() {\n      return this._pickerMoment;\n    },\n    set: function set(value) {\n      value = this.dateTimeAdapter.deserialize(value);\n      this._pickerMoment = this.getValidDate(value) || this.dateTimeAdapter.now();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(OwlTimerComponent.prototype, \"minDateTime\", {\n    get: function get() {\n      return this._minDateTime;\n    },\n    set: function set(value) {\n      value = this.dateTimeAdapter.deserialize(value);\n      this._minDateTime = this.getValidDate(value);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(OwlTimerComponent.prototype, \"maxDateTime\", {\n    get: function get() {\n      return this._maxDateTime;\n    },\n    set: function set(value) {\n      value = this.dateTimeAdapter.deserialize(value);\n      this._maxDateTime = this.getValidDate(value);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(OwlTimerComponent.prototype, \"hourValue\", {\n    get: function get() {\n      return this.dateTimeAdapter.getHours(this.pickerMoment);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(OwlTimerComponent.prototype, \"hourBoxValue\", {\n    get: function get() {\n      var hours = this.hourValue;\n\n      if (!this.hour12Timer) {\n        return hours;\n      } else {\n        if (hours === 0) {\n          hours = 12;\n          this.isPM = false;\n        } else if (hours > 0 && hours < 12) {\n          this.isPM = false;\n        } else if (hours === 12) {\n          this.isPM = true;\n        } else if (hours > 12 && hours < 24) {\n          hours = hours - 12;\n          this.isPM = true;\n        }\n\n        return hours;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(OwlTimerComponent.prototype, \"minuteValue\", {\n    get: function get() {\n      return this.dateTimeAdapter.getMinutes(this.pickerMoment);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(OwlTimerComponent.prototype, \"secondValue\", {\n    get: function get() {\n      return this.dateTimeAdapter.getSeconds(this.pickerMoment);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(OwlTimerComponent.prototype, \"upHourButtonLabel\", {\n    get: function get() {\n      return this.pickerIntl.upHourLabel;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(OwlTimerComponent.prototype, \"downHourButtonLabel\", {\n    get: function get() {\n      return this.pickerIntl.downHourLabel;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(OwlTimerComponent.prototype, \"upMinuteButtonLabel\", {\n    get: function get() {\n      return this.pickerIntl.upMinuteLabel;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(OwlTimerComponent.prototype, \"downMinuteButtonLabel\", {\n    get: function get() {\n      return this.pickerIntl.downMinuteLabel;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(OwlTimerComponent.prototype, \"upSecondButtonLabel\", {\n    get: function get() {\n      return this.pickerIntl.upSecondLabel;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(OwlTimerComponent.prototype, \"downSecondButtonLabel\", {\n    get: function get() {\n      return this.pickerIntl.downSecondLabel;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(OwlTimerComponent.prototype, \"hour12ButtonLabel\", {\n    get: function get() {\n      return this.isPM ? this.pickerIntl.hour12PMLabel : this.pickerIntl.hour12AMLabel;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(OwlTimerComponent.prototype, \"owlDTTimerClass\", {\n    get: function get() {\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(OwlTimerComponent.prototype, \"owlDTTimeTabIndex\", {\n    get: function get() {\n      return -1;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  OwlTimerComponent.prototype.ngOnInit = function () {};\n\n  OwlTimerComponent.prototype.focus = function () {\n    var _this = this;\n\n    this.ngZone.runOutsideAngular(function () {\n      _this.ngZone.onStable.asObservable().pipe(take(1)).subscribe(function () {\n        _this.elmRef.nativeElement.focus();\n      });\n    });\n  };\n\n  OwlTimerComponent.prototype.setHourValueViaInput = function (hours) {\n    if (this.hour12Timer && this.isPM && hours >= 1 && hours <= 11) {\n      hours = hours + 12;\n    } else if (this.hour12Timer && !this.isPM && hours === 12) {\n      hours = 0;\n    }\n\n    this.setHourValue(hours);\n  };\n\n  OwlTimerComponent.prototype.setHourValue = function (hours) {\n    var m = this.dateTimeAdapter.setHours(this.pickerMoment, hours);\n    this.selectedChange.emit(m);\n    this.cdRef.markForCheck();\n  };\n\n  OwlTimerComponent.prototype.setMinuteValue = function (minutes) {\n    var m = this.dateTimeAdapter.setMinutes(this.pickerMoment, minutes);\n    this.selectedChange.emit(m);\n    this.cdRef.markForCheck();\n  };\n\n  OwlTimerComponent.prototype.setSecondValue = function (seconds) {\n    var m = this.dateTimeAdapter.setSeconds(this.pickerMoment, seconds);\n    this.selectedChange.emit(m);\n    this.cdRef.markForCheck();\n  };\n\n  OwlTimerComponent.prototype.setMeridiem = function (event) {\n    this.isPM = !this.isPM;\n    var hours = this.hourValue;\n\n    if (this.isPM) {\n      hours = hours + 12;\n    } else {\n      hours = hours - 12;\n    }\n\n    if (hours >= 0 && hours <= 23) {\n      this.setHourValue(hours);\n    }\n\n    this.cdRef.markForCheck();\n    event.preventDefault();\n  };\n\n  OwlTimerComponent.prototype.upHourEnabled = function () {\n    return !this.maxDateTime || this.compareHours(this.stepHour, this.maxDateTime) < 1;\n  };\n\n  OwlTimerComponent.prototype.downHourEnabled = function () {\n    return !this.minDateTime || this.compareHours(-this.stepHour, this.minDateTime) > -1;\n  };\n\n  OwlTimerComponent.prototype.upMinuteEnabled = function () {\n    return !this.maxDateTime || this.compareMinutes(this.stepMinute, this.maxDateTime) < 1;\n  };\n\n  OwlTimerComponent.prototype.downMinuteEnabled = function () {\n    return !this.minDateTime || this.compareMinutes(-this.stepMinute, this.minDateTime) > -1;\n  };\n\n  OwlTimerComponent.prototype.upSecondEnabled = function () {\n    return !this.maxDateTime || this.compareSeconds(this.stepSecond, this.maxDateTime) < 1;\n  };\n\n  OwlTimerComponent.prototype.downSecondEnabled = function () {\n    return !this.minDateTime || this.compareSeconds(-this.stepSecond, this.minDateTime) > -1;\n  };\n\n  OwlTimerComponent.prototype.compareHours = function (amount, comparedDate) {\n    var hours = this.dateTimeAdapter.getHours(this.pickerMoment) + amount;\n    var result = this.dateTimeAdapter.setHours(this.pickerMoment, hours);\n    return this.dateTimeAdapter.compare(result, comparedDate);\n  };\n\n  OwlTimerComponent.prototype.compareMinutes = function (amount, comparedDate) {\n    var minutes = this.dateTimeAdapter.getMinutes(this.pickerMoment) + amount;\n    var result = this.dateTimeAdapter.setMinutes(this.pickerMoment, minutes);\n    return this.dateTimeAdapter.compare(result, comparedDate);\n  };\n\n  OwlTimerComponent.prototype.compareSeconds = function (amount, comparedDate) {\n    var seconds = this.dateTimeAdapter.getSeconds(this.pickerMoment) + amount;\n    var result = this.dateTimeAdapter.setSeconds(this.pickerMoment, seconds);\n    return this.dateTimeAdapter.compare(result, comparedDate);\n  };\n\n  OwlTimerComponent.prototype.getValidDate = function (obj) {\n    return this.dateTimeAdapter.isDateInstance(obj) && this.dateTimeAdapter.isValid(obj) ? obj : null;\n  };\n\n  __decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], OwlTimerComponent.prototype, \"pickerMoment\", null);\n\n  __decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], OwlTimerComponent.prototype, \"minDateTime\", null);\n\n  __decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], OwlTimerComponent.prototype, \"maxDateTime\", null);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], OwlTimerComponent.prototype, \"showSecondsTimer\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], OwlTimerComponent.prototype, \"hour12Timer\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], OwlTimerComponent.prototype, \"stepHour\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], OwlTimerComponent.prototype, \"stepMinute\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], OwlTimerComponent.prototype, \"stepSecond\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", Object)], OwlTimerComponent.prototype, \"selectedChange\", void 0);\n\n  __decorate([HostBinding('class.owl-dt-timer'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], OwlTimerComponent.prototype, \"owlDTTimerClass\", null);\n\n  __decorate([HostBinding('attr.tabindex'), __metadata(\"design:type\", Number), __metadata(\"design:paramtypes\", [])], OwlTimerComponent.prototype, \"owlDTTimeTabIndex\", null);\n\n  OwlTimerComponent = __decorate([__param(4, Optional()), __metadata(\"design:paramtypes\", [NgZone, ElementRef, OwlDateTimeIntl, ChangeDetectorRef, DateTimeAdapter])], OwlTimerComponent);\n\n  OwlTimerComponent.ɵfac = function OwlTimerComponent_Factory(t) {\n    return new (t || OwlTimerComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.OwlDateTimeIntl), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DateTimeAdapter, 8));\n  };\n\n  OwlTimerComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: OwlTimerComponent,\n    selectors: [[\"owl-date-time-timer\"]],\n    hostVars: 3,\n    hostBindings: function OwlTimerComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"tabindex\", ctx.owlDTTimeTabIndex);\n        ɵngcc0.ɵɵclassProp(\"owl-dt-timer\", ctx.owlDTTimerClass);\n      }\n    },\n    inputs: {\n      stepHour: \"stepHour\",\n      stepMinute: \"stepMinute\",\n      stepSecond: \"stepSecond\",\n      pickerMoment: \"pickerMoment\",\n      minDateTime: \"minDateTime\",\n      maxDateTime: \"maxDateTime\",\n      showSecondsTimer: \"showSecondsTimer\",\n      hour12Timer: \"hour12Timer\"\n    },\n    outputs: {\n      selectedChange: \"selectedChange\"\n    },\n    exportAs: [\"owlDateTimeTimer\"],\n    decls: 4,\n    vars: 22,\n    consts: [[3, \"upBtnAriaLabel\", \"downBtnAriaLabel\", \"upBtnDisabled\", \"downBtnDisabled\", \"boxValue\", \"value\", \"min\", \"max\", \"step\", \"inputLabel\", \"inputChange\", \"valueChange\"], [3, \"showDivider\", \"upBtnAriaLabel\", \"downBtnAriaLabel\", \"upBtnDisabled\", \"downBtnDisabled\", \"value\", \"min\", \"max\", \"step\", \"inputLabel\", \"inputChange\", \"valueChange\"], [3, \"showDivider\", \"upBtnAriaLabel\", \"downBtnAriaLabel\", \"upBtnDisabled\", \"downBtnDisabled\", \"value\", \"min\", \"max\", \"step\", \"inputLabel\", \"inputChange\", \"valueChange\", 4, \"ngIf\"], [\"class\", \"owl-dt-timer-hour12\", 4, \"ngIf\"], [1, \"owl-dt-timer-hour12\"], [\"type\", \"button\", \"tabindex\", \"0\", 1, \"owl-dt-control-button\", \"owl-dt-timer-hour12-box\", 3, \"click\"], [\"tabindex\", \"-1\", 1, \"owl-dt-control-button-content\"]],\n    template: function OwlTimerComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"owl-date-time-timer-box\", 0);\n        ɵngcc0.ɵɵlistener(\"inputChange\", function OwlTimerComponent_Template_owl_date_time_timer_box_inputChange_0_listener($event) {\n          return ctx.setHourValueViaInput($event);\n        })(\"valueChange\", function OwlTimerComponent_Template_owl_date_time_timer_box_valueChange_0_listener($event) {\n          return ctx.setHourValue($event);\n        });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(1, \"owl-date-time-timer-box\", 1);\n        ɵngcc0.ɵɵlistener(\"inputChange\", function OwlTimerComponent_Template_owl_date_time_timer_box_inputChange_1_listener($event) {\n          return ctx.setMinuteValue($event);\n        })(\"valueChange\", function OwlTimerComponent_Template_owl_date_time_timer_box_valueChange_1_listener($event) {\n          return ctx.setMinuteValue($event);\n        });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(2, OwlTimerComponent_owl_date_time_timer_box_2_Template, 1, 10, \"owl-date-time-timer-box\", 2);\n        ɵngcc0.ɵɵtemplate(3, OwlTimerComponent_div_3_Template, 4, 1, \"div\", 3);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"upBtnAriaLabel\", ctx.upHourButtonLabel)(\"downBtnAriaLabel\", ctx.downHourButtonLabel)(\"upBtnDisabled\", !ctx.upHourEnabled())(\"downBtnDisabled\", !ctx.downHourEnabled())(\"boxValue\", ctx.hourBoxValue)(\"value\", ctx.hourValue)(\"min\", 0)(\"max\", 23)(\"step\", ctx.stepHour)(\"inputLabel\", \"Hour\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"showDivider\", true)(\"upBtnAriaLabel\", ctx.upMinuteButtonLabel)(\"downBtnAriaLabel\", ctx.downMinuteButtonLabel)(\"upBtnDisabled\", !ctx.upMinuteEnabled())(\"downBtnDisabled\", !ctx.downMinuteEnabled())(\"value\", ctx.minuteValue)(\"min\", 0)(\"max\", 59)(\"step\", ctx.stepMinute)(\"inputLabel\", \"Minute\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.showSecondsTimer);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.hour12Timer);\n      }\n    },\n    directives: [ɵngcc3.OwlTimerBoxComponent, ɵngcc4.NgIf],\n    styles: [\"\"],\n    changeDetection: 0\n  });\n\n  (function () {\n    (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n  })();\n\n  return OwlTimerComponent;\n}();\n\nexport { OwlTimerComponent }; //# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGltZXIuY29tcG9uZW50LmpzIiwic291cmNlcyI6WyJ0aW1lci5jb21wb25lbnQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FTTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQTBCO0FBQzFCO0FBQ0E7QUFDQSIsInNvdXJjZXNDb250ZW50IjpbInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbnZhciBfX21ldGFkYXRhID0gKHRoaXMgJiYgdGhpcy5fX21ldGFkYXRhKSB8fCBmdW5jdGlvbiAoaywgdikge1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShrLCB2KTtcbn07XG52YXIgX19wYXJhbSA9ICh0aGlzICYmIHRoaXMuX19wYXJhbSkgfHwgZnVuY3Rpb24gKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxufTtcbmltcG9ydCB7IENoYW5nZURldGVjdGlvblN0cmF0ZWd5LCBDaGFuZ2VEZXRlY3RvclJlZiwgQ29tcG9uZW50LCBFbGVtZW50UmVmLCBFdmVudEVtaXR0ZXIsIEhvc3RCaW5kaW5nLCBJbnB1dCwgTmdab25lLCBPcHRpb25hbCwgT3V0cHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBPd2xEYXRlVGltZUludGwgfSBmcm9tICcuL2RhdGUtdGltZS1waWNrZXItaW50bC5zZXJ2aWNlJztcbmltcG9ydCB7IERhdGVUaW1lQWRhcHRlciB9IGZyb20gJy4vYWRhcHRlci9kYXRlLXRpbWUtYWRhcHRlci5jbGFzcyc7XG5pbXBvcnQgeyB0YWtlIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xudmFyIE93bFRpbWVyQ29tcG9uZW50ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBPd2xUaW1lckNvbXBvbmVudChuZ1pvbmUsIGVsbVJlZiwgcGlja2VySW50bCwgY2RSZWYsIGRhdGVUaW1lQWRhcHRlcikge1xuICAgICAgICB0aGlzLm5nWm9uZSA9IG5nWm9uZTtcbiAgICAgICAgdGhpcy5lbG1SZWYgPSBlbG1SZWY7XG4gICAgICAgIHRoaXMucGlja2VySW50bCA9IHBpY2tlckludGw7XG4gICAgICAgIHRoaXMuY2RSZWYgPSBjZFJlZjtcbiAgICAgICAgdGhpcy5kYXRlVGltZUFkYXB0ZXIgPSBkYXRlVGltZUFkYXB0ZXI7XG4gICAgICAgIHRoaXMuaXNQTSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnN0ZXBIb3VyID0gMTtcbiAgICAgICAgdGhpcy5zdGVwTWludXRlID0gMTtcbiAgICAgICAgdGhpcy5zdGVwU2Vjb25kID0gMTtcbiAgICAgICAgdGhpcy5zZWxlY3RlZENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE93bFRpbWVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJwaWNrZXJNb21lbnRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9waWNrZXJNb21lbnQ7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHRoaXMuZGF0ZVRpbWVBZGFwdGVyLmRlc2VyaWFsaXplKHZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMuX3BpY2tlck1vbWVudCA9IHRoaXMuZ2V0VmFsaWREYXRlKHZhbHVlKSB8fCB0aGlzLmRhdGVUaW1lQWRhcHRlci5ub3coKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE93bFRpbWVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtaW5EYXRlVGltZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21pbkRhdGVUaW1lO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdmFsdWUgPSB0aGlzLmRhdGVUaW1lQWRhcHRlci5kZXNlcmlhbGl6ZSh2YWx1ZSk7XG4gICAgICAgICAgICB0aGlzLl9taW5EYXRlVGltZSA9IHRoaXMuZ2V0VmFsaWREYXRlKHZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE93bFRpbWVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtYXhEYXRlVGltZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21heERhdGVUaW1lO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdmFsdWUgPSB0aGlzLmRhdGVUaW1lQWRhcHRlci5kZXNlcmlhbGl6ZSh2YWx1ZSk7XG4gICAgICAgICAgICB0aGlzLl9tYXhEYXRlVGltZSA9IHRoaXMuZ2V0VmFsaWREYXRlKHZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE93bFRpbWVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJob3VyVmFsdWVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGVUaW1lQWRhcHRlci5nZXRIb3Vycyh0aGlzLnBpY2tlck1vbWVudCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPd2xUaW1lckNvbXBvbmVudC5wcm90b3R5cGUsIFwiaG91ckJveFZhbHVlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaG91cnMgPSB0aGlzLmhvdXJWYWx1ZTtcbiAgICAgICAgICAgIGlmICghdGhpcy5ob3VyMTJUaW1lcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBob3VycztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChob3VycyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBob3VycyA9IDEyO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUE0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaG91cnMgPiAwICYmIGhvdXJzIDwgMTIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1BNID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGhvdXJzID09PSAxMikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUE0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChob3VycyA+IDEyICYmIGhvdXJzIDwgMjQpIHtcbiAgICAgICAgICAgICAgICAgICAgaG91cnMgPSBob3VycyAtIDEyO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUE0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gaG91cnM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPd2xUaW1lckNvbXBvbmVudC5wcm90b3R5cGUsIFwibWludXRlVmFsdWVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGVUaW1lQWRhcHRlci5nZXRNaW51dGVzKHRoaXMucGlja2VyTW9tZW50KTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE93bFRpbWVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzZWNvbmRWYWx1ZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZVRpbWVBZGFwdGVyLmdldFNlY29uZHModGhpcy5waWNrZXJNb21lbnQpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoT3dsVGltZXJDb21wb25lbnQucHJvdG90eXBlLCBcInVwSG91ckJ1dHRvbkxhYmVsXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5waWNrZXJJbnRsLnVwSG91ckxhYmVsO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoT3dsVGltZXJDb21wb25lbnQucHJvdG90eXBlLCBcImRvd25Ib3VyQnV0dG9uTGFiZWxcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBpY2tlckludGwuZG93bkhvdXJMYWJlbDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE93bFRpbWVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ1cE1pbnV0ZUJ1dHRvbkxhYmVsXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5waWNrZXJJbnRsLnVwTWludXRlTGFiZWw7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPd2xUaW1lckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZG93bk1pbnV0ZUJ1dHRvbkxhYmVsXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5waWNrZXJJbnRsLmRvd25NaW51dGVMYWJlbDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE93bFRpbWVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ1cFNlY29uZEJ1dHRvbkxhYmVsXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5waWNrZXJJbnRsLnVwU2Vjb25kTGFiZWw7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPd2xUaW1lckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZG93blNlY29uZEJ1dHRvbkxhYmVsXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5waWNrZXJJbnRsLmRvd25TZWNvbmRMYWJlbDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE93bFRpbWVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJob3VyMTJCdXR0b25MYWJlbFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNQTSA/IHRoaXMucGlja2VySW50bC5ob3VyMTJQTUxhYmVsIDogdGhpcy5waWNrZXJJbnRsLmhvdXIxMkFNTGFiZWw7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPd2xUaW1lckNvbXBvbmVudC5wcm90b3R5cGUsIFwib3dsRFRUaW1lckNsYXNzXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE93bFRpbWVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJvd2xEVFRpbWVUYWJJbmRleFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPd2xUaW1lckNvbXBvbmVudC5wcm90b3R5cGUubmdPbkluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgfTtcbiAgICBPd2xUaW1lckNvbXBvbmVudC5wcm90b3R5cGUuZm9jdXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLm5nWm9uZS5vblN0YWJsZS5hc09ic2VydmFibGUoKS5waXBlKHRha2UoMSkpLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuZWxtUmVmLm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIE93bFRpbWVyQ29tcG9uZW50LnByb3RvdHlwZS5zZXRIb3VyVmFsdWVWaWFJbnB1dCA9IGZ1bmN0aW9uIChob3Vycykge1xuICAgICAgICBpZiAodGhpcy5ob3VyMTJUaW1lciAmJiB0aGlzLmlzUE0gJiYgaG91cnMgPj0gMSAmJiBob3VycyA8PSAxMSkge1xuICAgICAgICAgICAgaG91cnMgPSBob3VycyArIDEyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuaG91cjEyVGltZXIgJiYgIXRoaXMuaXNQTSAmJiBob3VycyA9PT0gMTIpIHtcbiAgICAgICAgICAgIGhvdXJzID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldEhvdXJWYWx1ZShob3Vycyk7XG4gICAgfTtcbiAgICBPd2xUaW1lckNvbXBvbmVudC5wcm90b3R5cGUuc2V0SG91clZhbHVlID0gZnVuY3Rpb24gKGhvdXJzKSB7XG4gICAgICAgIHZhciBtID0gdGhpcy5kYXRlVGltZUFkYXB0ZXIuc2V0SG91cnModGhpcy5waWNrZXJNb21lbnQsIGhvdXJzKTtcbiAgICAgICAgdGhpcy5zZWxlY3RlZENoYW5nZS5lbWl0KG0pO1xuICAgICAgICB0aGlzLmNkUmVmLm1hcmtGb3JDaGVjaygpO1xuICAgIH07XG4gICAgT3dsVGltZXJDb21wb25lbnQucHJvdG90eXBlLnNldE1pbnV0ZVZhbHVlID0gZnVuY3Rpb24gKG1pbnV0ZXMpIHtcbiAgICAgICAgdmFyIG0gPSB0aGlzLmRhdGVUaW1lQWRhcHRlci5zZXRNaW51dGVzKHRoaXMucGlja2VyTW9tZW50LCBtaW51dGVzKTtcbiAgICAgICAgdGhpcy5zZWxlY3RlZENoYW5nZS5lbWl0KG0pO1xuICAgICAgICB0aGlzLmNkUmVmLm1hcmtGb3JDaGVjaygpO1xuICAgIH07XG4gICAgT3dsVGltZXJDb21wb25lbnQucHJvdG90eXBlLnNldFNlY29uZFZhbHVlID0gZnVuY3Rpb24gKHNlY29uZHMpIHtcbiAgICAgICAgdmFyIG0gPSB0aGlzLmRhdGVUaW1lQWRhcHRlci5zZXRTZWNvbmRzKHRoaXMucGlja2VyTW9tZW50LCBzZWNvbmRzKTtcbiAgICAgICAgdGhpcy5zZWxlY3RlZENoYW5nZS5lbWl0KG0pO1xuICAgICAgICB0aGlzLmNkUmVmLm1hcmtGb3JDaGVjaygpO1xuICAgIH07XG4gICAgT3dsVGltZXJDb21wb25lbnQucHJvdG90eXBlLnNldE1lcmlkaWVtID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHRoaXMuaXNQTSA9ICF0aGlzLmlzUE07XG4gICAgICAgIHZhciBob3VycyA9IHRoaXMuaG91clZhbHVlO1xuICAgICAgICBpZiAodGhpcy5pc1BNKSB7XG4gICAgICAgICAgICBob3VycyA9IGhvdXJzICsgMTI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBob3VycyA9IGhvdXJzIC0gMTI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhvdXJzID49IDAgJiYgaG91cnMgPD0gMjMpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0SG91clZhbHVlKGhvdXJzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNkUmVmLm1hcmtGb3JDaGVjaygpO1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH07XG4gICAgT3dsVGltZXJDb21wb25lbnQucHJvdG90eXBlLnVwSG91ckVuYWJsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5tYXhEYXRlVGltZSB8fCB0aGlzLmNvbXBhcmVIb3Vycyh0aGlzLnN0ZXBIb3VyLCB0aGlzLm1heERhdGVUaW1lKSA8IDE7XG4gICAgfTtcbiAgICBPd2xUaW1lckNvbXBvbmVudC5wcm90b3R5cGUuZG93bkhvdXJFbmFibGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMubWluRGF0ZVRpbWUgfHwgdGhpcy5jb21wYXJlSG91cnMoLXRoaXMuc3RlcEhvdXIsIHRoaXMubWluRGF0ZVRpbWUpID4gLTE7XG4gICAgfTtcbiAgICBPd2xUaW1lckNvbXBvbmVudC5wcm90b3R5cGUudXBNaW51dGVFbmFibGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMubWF4RGF0ZVRpbWUgfHwgdGhpcy5jb21wYXJlTWludXRlcyh0aGlzLnN0ZXBNaW51dGUsIHRoaXMubWF4RGF0ZVRpbWUpIDwgMTtcbiAgICB9O1xuICAgIE93bFRpbWVyQ29tcG9uZW50LnByb3RvdHlwZS5kb3duTWludXRlRW5hYmxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLm1pbkRhdGVUaW1lIHx8IHRoaXMuY29tcGFyZU1pbnV0ZXMoLXRoaXMuc3RlcE1pbnV0ZSwgdGhpcy5taW5EYXRlVGltZSkgPiAtMTtcbiAgICB9O1xuICAgIE93bFRpbWVyQ29tcG9uZW50LnByb3RvdHlwZS51cFNlY29uZEVuYWJsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5tYXhEYXRlVGltZSB8fCB0aGlzLmNvbXBhcmVTZWNvbmRzKHRoaXMuc3RlcFNlY29uZCwgdGhpcy5tYXhEYXRlVGltZSkgPCAxO1xuICAgIH07XG4gICAgT3dsVGltZXJDb21wb25lbnQucHJvdG90eXBlLmRvd25TZWNvbmRFbmFibGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMubWluRGF0ZVRpbWUgfHwgdGhpcy5jb21wYXJlU2Vjb25kcygtdGhpcy5zdGVwU2Vjb25kLCB0aGlzLm1pbkRhdGVUaW1lKSA+IC0xO1xuICAgIH07XG4gICAgT3dsVGltZXJDb21wb25lbnQucHJvdG90eXBlLmNvbXBhcmVIb3VycyA9IGZ1bmN0aW9uIChhbW91bnQsIGNvbXBhcmVkRGF0ZSkge1xuICAgICAgICB2YXIgaG91cnMgPSB0aGlzLmRhdGVUaW1lQWRhcHRlci5nZXRIb3Vycyh0aGlzLnBpY2tlck1vbWVudCkgKyBhbW91bnQ7XG4gICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRhdGVUaW1lQWRhcHRlci5zZXRIb3Vycyh0aGlzLnBpY2tlck1vbWVudCwgaG91cnMpO1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlVGltZUFkYXB0ZXIuY29tcGFyZShyZXN1bHQsIGNvbXBhcmVkRGF0ZSk7XG4gICAgfTtcbiAgICBPd2xUaW1lckNvbXBvbmVudC5wcm90b3R5cGUuY29tcGFyZU1pbnV0ZXMgPSBmdW5jdGlvbiAoYW1vdW50LCBjb21wYXJlZERhdGUpIHtcbiAgICAgICAgdmFyIG1pbnV0ZXMgPSB0aGlzLmRhdGVUaW1lQWRhcHRlci5nZXRNaW51dGVzKHRoaXMucGlja2VyTW9tZW50KSArIGFtb3VudDtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuZGF0ZVRpbWVBZGFwdGVyLnNldE1pbnV0ZXModGhpcy5waWNrZXJNb21lbnQsIG1pbnV0ZXMpO1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlVGltZUFkYXB0ZXIuY29tcGFyZShyZXN1bHQsIGNvbXBhcmVkRGF0ZSk7XG4gICAgfTtcbiAgICBPd2xUaW1lckNvbXBvbmVudC5wcm90b3R5cGUuY29tcGFyZVNlY29uZHMgPSBmdW5jdGlvbiAoYW1vdW50LCBjb21wYXJlZERhdGUpIHtcbiAgICAgICAgdmFyIHNlY29uZHMgPSB0aGlzLmRhdGVUaW1lQWRhcHRlci5nZXRTZWNvbmRzKHRoaXMucGlja2VyTW9tZW50KSArIGFtb3VudDtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuZGF0ZVRpbWVBZGFwdGVyLnNldFNlY29uZHModGhpcy5waWNrZXJNb21lbnQsIHNlY29uZHMpO1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlVGltZUFkYXB0ZXIuY29tcGFyZShyZXN1bHQsIGNvbXBhcmVkRGF0ZSk7XG4gICAgfTtcbiAgICBPd2xUaW1lckNvbXBvbmVudC5wcm90b3R5cGUuZ2V0VmFsaWREYXRlID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICByZXR1cm4gKHRoaXMuZGF0ZVRpbWVBZGFwdGVyLmlzRGF0ZUluc3RhbmNlKG9iaikgJiYgdGhpcy5kYXRlVGltZUFkYXB0ZXIuaXNWYWxpZChvYmopKSA/IG9iaiA6IG51bGw7XG4gICAgfTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSlcbiAgICBdLCBPd2xUaW1lckNvbXBvbmVudC5wcm90b3R5cGUsIFwicGlja2VyTW9tZW50XCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKVxuICAgIF0sIE93bFRpbWVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtaW5EYXRlVGltZVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSlcbiAgICBdLCBPd2xUaW1lckNvbXBvbmVudC5wcm90b3R5cGUsIFwibWF4RGF0ZVRpbWVcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuICAgIF0sIE93bFRpbWVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzaG93U2Vjb25kc1RpbWVyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuICAgIF0sIE93bFRpbWVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJob3VyMTJUaW1lclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE93bFRpbWVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzdGVwSG91clwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE93bFRpbWVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzdGVwTWludXRlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgT3dsVGltZXJDb21wb25lbnQucHJvdG90eXBlLCBcInN0ZXBTZWNvbmRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgT3V0cHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgT3dsVGltZXJDb21wb25lbnQucHJvdG90eXBlLCBcInNlbGVjdGVkQ2hhbmdlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5vd2wtZHQtdGltZXInKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgT3dsVGltZXJDb21wb25lbnQucHJvdG90eXBlLCBcIm93bERUVGltZXJDbGFzc1wiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2F0dHIudGFiaW5kZXgnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlciksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBPd2xUaW1lckNvbXBvbmVudC5wcm90b3R5cGUsIFwib3dsRFRUaW1lVGFiSW5kZXhcIiwgbnVsbCk7XG4gICAgT3dsVGltZXJDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIGV4cG9ydEFzOiAnb3dsRGF0ZVRpbWVUaW1lcicsXG4gICAgICAgICAgICBzZWxlY3RvcjogJ293bC1kYXRlLXRpbWUtdGltZXInLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiPG93bC1kYXRlLXRpbWUtdGltZXItYm94IFt1cEJ0bkFyaWFMYWJlbF09XFxcInVwSG91ckJ1dHRvbkxhYmVsXFxcIiBbZG93bkJ0bkFyaWFMYWJlbF09XFxcImRvd25Ib3VyQnV0dG9uTGFiZWxcXFwiIFt1cEJ0bkRpc2FibGVkXT1cXFwiIXVwSG91ckVuYWJsZWQoKVxcXCIgW2Rvd25CdG5EaXNhYmxlZF09XFxcIiFkb3duSG91ckVuYWJsZWQoKVxcXCIgW2JveFZhbHVlXT1cXFwiaG91ckJveFZhbHVlXFxcIiBbdmFsdWVdPVxcXCJob3VyVmFsdWVcXFwiIFttaW5dPVxcXCIwXFxcIiBbbWF4XT1cXFwiMjNcXFwiIFtzdGVwXT1cXFwic3RlcEhvdXJcXFwiIFtpbnB1dExhYmVsXT1cXFwiJ0hvdXInXFxcIiAoaW5wdXRDaGFuZ2UpPVxcXCJzZXRIb3VyVmFsdWVWaWFJbnB1dCgkZXZlbnQpXFxcIiAodmFsdWVDaGFuZ2UpPVxcXCJzZXRIb3VyVmFsdWUoJGV2ZW50KVxcXCI+PC9vd2wtZGF0ZS10aW1lLXRpbWVyLWJveD48b3dsLWRhdGUtdGltZS10aW1lci1ib3ggW3Nob3dEaXZpZGVyXT1cXFwidHJ1ZVxcXCIgW3VwQnRuQXJpYUxhYmVsXT1cXFwidXBNaW51dGVCdXR0b25MYWJlbFxcXCIgW2Rvd25CdG5BcmlhTGFiZWxdPVxcXCJkb3duTWludXRlQnV0dG9uTGFiZWxcXFwiIFt1cEJ0bkRpc2FibGVkXT1cXFwiIXVwTWludXRlRW5hYmxlZCgpXFxcIiBbZG93bkJ0bkRpc2FibGVkXT1cXFwiIWRvd25NaW51dGVFbmFibGVkKClcXFwiIFt2YWx1ZV09XFxcIm1pbnV0ZVZhbHVlXFxcIiBbbWluXT1cXFwiMFxcXCIgW21heF09XFxcIjU5XFxcIiBbc3RlcF09XFxcInN0ZXBNaW51dGVcXFwiIFtpbnB1dExhYmVsXT1cXFwiJ01pbnV0ZSdcXFwiIChpbnB1dENoYW5nZSk9XFxcInNldE1pbnV0ZVZhbHVlKCRldmVudClcXFwiICh2YWx1ZUNoYW5nZSk9XFxcInNldE1pbnV0ZVZhbHVlKCRldmVudClcXFwiPjwvb3dsLWRhdGUtdGltZS10aW1lci1ib3g+PG93bC1kYXRlLXRpbWUtdGltZXItYm94ICpuZ0lmPVxcXCJzaG93U2Vjb25kc1RpbWVyXFxcIiBbc2hvd0RpdmlkZXJdPVxcXCJ0cnVlXFxcIiBbdXBCdG5BcmlhTGFiZWxdPVxcXCJ1cFNlY29uZEJ1dHRvbkxhYmVsXFxcIiBbZG93bkJ0bkFyaWFMYWJlbF09XFxcImRvd25TZWNvbmRCdXR0b25MYWJlbFxcXCIgW3VwQnRuRGlzYWJsZWRdPVxcXCIhdXBTZWNvbmRFbmFibGVkKClcXFwiIFtkb3duQnRuRGlzYWJsZWRdPVxcXCIhZG93blNlY29uZEVuYWJsZWQoKVxcXCIgW3ZhbHVlXT1cXFwic2Vjb25kVmFsdWVcXFwiIFttaW5dPVxcXCIwXFxcIiBbbWF4XT1cXFwiNTlcXFwiIFtzdGVwXT1cXFwic3RlcFNlY29uZFxcXCIgW2lucHV0TGFiZWxdPVxcXCInU2Vjb25kJ1xcXCIgKGlucHV0Q2hhbmdlKT1cXFwic2V0U2Vjb25kVmFsdWUoJGV2ZW50KVxcXCIgKHZhbHVlQ2hhbmdlKT1cXFwic2V0U2Vjb25kVmFsdWUoJGV2ZW50KVxcXCI+PC9vd2wtZGF0ZS10aW1lLXRpbWVyLWJveD48ZGl2ICpuZ0lmPVxcXCJob3VyMTJUaW1lclxcXCIgY2xhc3M9XFxcIm93bC1kdC10aW1lci1ob3VyMTJcXFwiPjxidXR0b24gY2xhc3M9XFxcIm93bC1kdC1jb250cm9sLWJ1dHRvbiBvd2wtZHQtdGltZXItaG91cjEyLWJveFxcXCIgdHlwZT1cXFwiYnV0dG9uXFxcIiB0YWJpbmRleD1cXFwiMFxcXCIgKGNsaWNrKT1cXFwic2V0TWVyaWRpZW0oJGV2ZW50KVxcXCI+PHNwYW4gY2xhc3M9XFxcIm93bC1kdC1jb250cm9sLWJ1dHRvbi1jb250ZW50XFxcIiB0YWJpbmRleD1cXFwiLTFcXFwiPnt7aG91cjEyQnV0dG9uTGFiZWx9fTwvc3Bhbj48L2J1dHRvbj48L2Rpdj5cIixcbiAgICAgICAgICAgIHN0eWxlczogW1wiXCJdLFxuICAgICAgICAgICAgcHJlc2VydmVXaGl0ZXNwYWNlczogZmFsc2UsXG4gICAgICAgICAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgICAgICAgfSksXG4gICAgICAgIF9fcGFyYW0oNCwgT3B0aW9uYWwoKSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTmdab25lLFxuICAgICAgICAgICAgRWxlbWVudFJlZixcbiAgICAgICAgICAgIE93bERhdGVUaW1lSW50bCxcbiAgICAgICAgICAgIENoYW5nZURldGVjdG9yUmVmLFxuICAgICAgICAgICAgRGF0ZVRpbWVBZGFwdGVyXSlcbiAgICBdLCBPd2xUaW1lckNvbXBvbmVudCk7XG4gICAgcmV0dXJuIE93bFRpbWVyQ29tcG9uZW50O1xufSgpKTtcbmV4cG9ydCB7IE93bFRpbWVyQ29tcG9uZW50IH07XG4iXX0=","map":null,"metadata":{},"sourceType":"module"}