{"ast":null,"code":"import _classCallCheck from \"/Users/frida/teamdagarna/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/frida/teamdagarna/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { finalize } from 'rxjs/operators';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { AngularFirestore } from 'angularfire2/firestore';\nimport { AngularFireStorage } from 'angularfire2/storage';\nimport { tap } from 'rxjs/operators';\nimport { DatePipe } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"angularfire2/firestore\";\nimport * as i3 from \"angularfire2/storage\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"ng-pick-datetime\";\n\nfunction AdmineventComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"progress\", 32);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"number\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var pct_r5 = ctx.ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"value\", pct_r5);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(3, 2, pct_r5), \"% \");\n  }\n}\n\nfunction AdmineventComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h3\");\n    i0.ɵɵtext(2, \"Uploaded!\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction AdmineventComponent_ng_container_65_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 13)(2, \"label\", 14);\n    i0.ɵɵtext(3, \"Anm\\xE4lan \\xF6ppnar:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"input\", 33)(5, \"owl-date-time\", null, 34);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 13)(8, \"label\", 14);\n    i0.ɵɵtext(9, \"Anm\\xE4lan st\\xE4nger:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(10, \"input\", 35)(11, \"owl-date-time\", null, 36);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 13)(14, \"label\", 14);\n    i0.ɵɵtext(15, \"Avanm\\xE4lan st\\xE4nger:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(16, \"input\", 37)(17, \"owl-date-time\", null, 38);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    var _r7 = i0.ɵɵreference(6);\n\n    var _r8 = i0.ɵɵreference(12);\n\n    var _r9 = i0.ɵɵreference(18);\n\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"owlDateTime\", _r7)(\"owlDateTimeTrigger\", _r7);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"owlDateTime\", _r8)(\"owlDateTimeTrigger\", _r8);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"owlDateTime\", _r9)(\"owlDateTimeTrigger\", _r9);\n  }\n}\n\nexport var AdmineventComponent = /*#__PURE__*/(function () {\n  var AdmineventComponent = /*#__PURE__*/function () {\n    function AdmineventComponent(fb, afs, storage, router, findRoute, datePipe) {\n      _classCallCheck(this, AdmineventComponent);\n\n      this.fb = fb;\n      this.afs = afs;\n      this.storage = storage;\n      this.router = router;\n      this.findRoute = findRoute;\n      this.datePipe = datePipe;\n      this.imagepath = '';\n      this.logoUploaded = false;\n      this.eventid = this.findRoute.snapshot.params.id;\n    }\n\n    _createClass(AdmineventComponent, [{\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        this.today = Date();\n        this.changeEventForm = this.fb.group({\n          'title': ['', [Validators.required]],\n          'ingress': ['', []],\n          'about': ['', [Validators.required]],\n          'preorunder': ['', [Validators.required]],\n          'location': ['', [Validators.required]],\n          'eventstarts': ['', [Validators.required]],\n          'eventends': ['', [Validators.required]],\n          'signonstarts': ['', [Validators.required]],\n          'signonends': ['', [Validators.required]],\n          'signoffends': ['', [Validators.required]],\n          'maxattendance': ['', [Validators.required]],\n          'foodportions': ['0', []],\n          'published': [false, []],\n          'coolness': ['0', [Validators.required]],\n          'signon': [true, [Validators.required]]\n        });\n        this.preloadData();\n      }\n    }, {\n      key: \"submit\",\n      value: function submit(data) {\n        try {\n          var formValue = this.changeEventForm.value;\n          this.afs.doc(\"events/\".concat(this.findRoute.snapshot.params.id)).update(formValue);\n\n          if (this.imagepath !== '') {\n            this.afs.doc(\"events/\".concat(this.findRoute.snapshot.params.id)).update({\n              imagepath: this.imagepath\n            });\n          }\n        } catch (err) {\n          console.log(err);\n        }\n\n        this.router.navigate(['dreamteamadmin/events']);\n      }\n    }, {\n      key: \"signon\",\n      get: function get() {\n        return this.changeEventForm.get('signon');\n      }\n    }, {\n      key: \"preloadData\",\n      value: function preloadData() {\n        var _this = this;\n\n        this.afs.doc(\"events/\".concat(this.findRoute.snapshot.params.id)).valueChanges().pipe(tap(function (data) {\n          try {\n            _this.event = data;\n            _this.event.eventstarts = _this.event.eventstarts.toDate();\n            _this.event.eventends = _this.event.eventends.toDate();\n            _this.event.signonstarts = _this.event.signonstarts.toDate();\n            _this.event.signonends = _this.event.signonends.toDate();\n            _this.event.signoffends = _this.event.signoffends.toDate(); // this.changeEventForm.patchValue(data)\n          } catch (err) {\n            console.log(err);\n          }\n\n          console.log(_this.event.eventstarts);\n\n          _this.changeEventForm.patchValue(_this.event);\n        })).subscribe();\n      } // file\n\n    }, {\n      key: \"startUpload\",\n      value: function startUpload(event) {\n        var _this2 = this;\n\n        // The File object\n        var file = event.item(0); // Client-side validation example\n\n        if (file.type.split('/')[0] !== 'image') {\n          console.error('unsupported file type :( ');\n          return;\n        } // The storage path\n\n\n        this.imagepath = \"event/\".concat(new Date().getTime(), \"_\").concat(file.name);\n        var path = \"event/\".concat(new Date().getTime(), \"_\").concat(file.name); // The main task\n\n        this.task = this.storage.upload(path, file); // Progress monitoring\n\n        this.percentage = this.task.percentageChanges();\n        this.snapshot = this.task.snapshotChanges(); // The file's download URL\n\n        this.task.snapshotChanges().pipe(finalize(function () {\n          return _this2.downloadURL = _this2.storage.ref(path).getDownloadURL();\n        })).subscribe();\n        this.logoUploaded = true;\n      }\n    }]);\n\n    return AdmineventComponent;\n  }();\n\n  AdmineventComponent.ɵfac = function AdmineventComponent_Factory(t) {\n    return new (t || AdmineventComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.AngularFirestore), i0.ɵɵdirectiveInject(i3.AngularFireStorage), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i4.ActivatedRoute), i0.ɵɵdirectiveInject(i5.DatePipe));\n  };\n\n  AdmineventComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AdmineventComponent,\n    selectors: [[\"app-adminevent\"]],\n    decls: 85,\n    vars: 13,\n    consts: [[3, \"formGroup\", \"ngSubmit\"], [1, \"card\", \"login-card\"], [1, \"card-content\"], [1, \"title\", \"is-2\"], [1, \"columns\"], [1, \"column\", \"is-half\"], [1, \"file\", \"is-info\"], [1, \"file-label\"], [\"type\", \"file\", \"name\", \"resume\", 1, \"file-input\", 3, \"change\"], [1, \"file-cta\"], [1, \"file-icon\"], [1, \"fas\", \"fa-upload\"], [4, \"ngIf\"], [1, \"field\"], [1, \"label\"], [\"type\", \"text\", \"formControlName\", \"title\", 1, \"input\", \"is-success\"], [\"type\", \"text\", \"formControlName\", \"ingress\", 1, \"input\", \"is-success\"], [\"type\", \"text\", \"formControlName\", \"about\", 1, \"textarea\", \"is-success\"], [1, \"control\"], [\"required\", \"\", 1, \"select\"], [\"formControlName\", \"preorunder\"], [\"type\", \"text\", \"formControlName\", \"location\", 1, \"input\", \"is-success\"], [\"formControlName\", \"eventstarts\", 1, \"input\", 3, \"owlDateTime\", \"owlDateTimeTrigger\"], [\"eventstarts\", \"\"], [\"formControlName\", \"eventends\", 1, \"input\", 3, \"owlDateTime\", \"owlDateTimeTrigger\"], [\"eventends\", \"\"], [\"type\", \"checkbox\", \"formControlName\", \"signon\"], [\"type\", \"number\", \"formControlName\", \"maxattendance\", 1, \"input\", \"is-success\"], [\"type\", \"number\", \"formControlName\", \"foodportions\", 1, \"input\", \"is-success\"], [\"type\", \"checkbox\", \"formControlName\", \"published\"], [\"type\", \"number\", \"formControlName\", \"coolness\", 1, \"input\", \"is-success\"], [\"type\", \"submit\", 1, \"button\", \"is-fullwidth\", 3, \"disabled\"], [\"max\", \"100\", 1, \"progress\", \"is-success\", 3, \"value\"], [\"formControlName\", \"signonstarts\", 1, \"input\", 3, \"owlDateTime\", \"owlDateTimeTrigger\"], [\"signonstarts\", \"\"], [\"formControlName\", \"signonends\", 1, \"input\", 3, \"owlDateTime\", \"owlDateTimeTrigger\"], [\"signonends\", \"\"], [\"formControlName\", \"signoffends\", 1, \"input\", 3, \"owlDateTime\", \"owlDateTimeTrigger\"], [\"signoffends\", \"\"]],\n    template: function AdmineventComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"form\", 0);\n        i0.ɵɵlistener(\"ngSubmit\", function AdmineventComponent_Template_form_ngSubmit_0_listener() {\n          return ctx.submit(ctx.changeEventForm.value);\n        });\n        i0.ɵɵelementStart(1, \"div\", 1)(2, \"div\", 2)(3, \"h1\", 3);\n        i0.ɵɵtext(4, \"\\xC4ndra event\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 4)(6, \"div\", 5)(7, \"div\", 6)(8, \"label\", 7)(9, \"input\", 8);\n        i0.ɵɵlistener(\"change\", function AdmineventComponent_Template_input_change_9_listener($event) {\n          return ctx.startUpload($event.target.files);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"span\", 9)(11, \"span\", 10);\n        i0.ɵɵelement(12, \"i\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"span\", 7);\n        i0.ɵɵtext(14, \" Ladda upp bild (B\\xE4st med ratio runt 5:3) \");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(15, \"div\", 5);\n        i0.ɵɵtemplate(16, AdmineventComponent_div_16_Template, 4, 4, \"div\", 12);\n        i0.ɵɵpipe(17, \"async\");\n        i0.ɵɵtemplate(18, AdmineventComponent_div_18_Template, 3, 0, \"div\", 12);\n        i0.ɵɵpipe(19, \"async\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(20, \"div\", 13)(21, \"label\", 14);\n        i0.ɵɵtext(22, \"Titel\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(23, \"input\", 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"div\", 13)(25, \"label\", 14);\n        i0.ɵɵtext(26, \"Ingress/inledning (Optional)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(27, \"input\", 16);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"div\", 13)(29, \"label\", 14);\n        i0.ɵɵtext(30, \"Beskrivande text\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(31, \"textarea\", 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"div\", 13)(33, \"label\", 14);\n        i0.ɵɵtext(34, \"Inf\\xF6rdagarna eller m\\xE4ssdagarna?\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(35, \"div\", 18)(36, \"div\", 19)(37, \"select\", 20)(38, \"option\");\n        i0.ɵɵtext(39, \"Inf\\xF6rdagarna\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(40, \"option\");\n        i0.ɵɵtext(41, \"M\\xE4ssdagarna\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(42, \"option\");\n        i0.ɵɵtext(43, \"\\xD6vrigt\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(44, \"div\", 13)(45, \"label\", 14);\n        i0.ɵɵtext(46, \"Plats/sal\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(47, \"input\", 21);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(48, \"div\", 13)(49, \"label\", 14);\n        i0.ɵɵtext(50, \"N\\xE4r b\\xF6rjar eventet?\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(51, \"input\", 22)(52, \"owl-date-time\", null, 23);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(54, \"div\", 13)(55, \"label\", 14);\n        i0.ɵɵtext(56, \"N\\xE4r slutar eventet?\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(57, \"input\", 24)(58, \"owl-date-time\", null, 25);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(60, \"div\", 13)(61, \"label\", 14);\n        i0.ɵɵtext(62, \"Ska anm\\xE4lan finnas? (Nej om det t.ex. sk\\xF6ts externt)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(63, \"input\", 26);\n        i0.ɵɵtext(64, \" Ja \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(65, AdmineventComponent_ng_container_65_Template, 19, 6, \"ng-container\", 12);\n        i0.ɵɵelementStart(66, \"div\", 13)(67, \"label\", 14);\n        i0.ɵɵtext(68, \"Hur m\\xE5nga platser? (0 = odefinerat/o\\xE4ndligt)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(69, \"input\", 27);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(70, \"div\", 13)(71, \"label\", 14);\n        i0.ɵɵtext(72, \"Hur m\\xE5nga f\\xE5r mat? (0 = ingen)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(73, \"input\", 28);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(74, \"div\", 13)(75, \"label\", 14);\n        i0.ɵɵtext(76, \"Publicera? (Ska eventet synas?)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(77, \"input\", 29);\n        i0.ɵɵtext(78, \" JA \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(79, \"div\", 13)(80, \"label\", 14);\n        i0.ɵɵtext(81, \"Hur coolt \\xE4r eventet p\\xE5 en skala mellan 0-100? D\\xE4r 0 \\xE4r m\\xF6te med f\\xF6retagsgruppen och 100 \\xE4r Blondinbella. (H\\xF6gre ger mer publicitet)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(82, \"input\", 30);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(83, \"button\", 31);\n        i0.ɵɵtext(84, \"\\xC4ndra\");\n        i0.ɵɵelementEnd()()()();\n      }\n\n      if (rf & 2) {\n        var _r2 = i0.ɵɵreference(53);\n\n        var _r3 = i0.ɵɵreference(59);\n\n        i0.ɵɵproperty(\"formGroup\", ctx.changeEventForm);\n        i0.ɵɵadvance(16);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(17, 9, ctx.percentage));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(19, 11, ctx.downloadURL));\n        i0.ɵɵadvance(33);\n        i0.ɵɵproperty(\"owlDateTime\", _r2)(\"owlDateTimeTrigger\", _r2);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"owlDateTime\", _r3)(\"owlDateTimeTrigger\", _r3);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngIf\", ctx.signon.value);\n        i0.ɵɵadvance(18);\n        i0.ɵɵproperty(\"disabled\", !ctx.changeEventForm.valid);\n      }\n    },\n    directives: [i1.ɵNgNoValidate, i1.NgControlStatusGroup, i1.FormGroupDirective, i5.NgIf, i1.DefaultValueAccessor, i1.NgControlStatus, i1.FormControlName, i1.SelectControlValueAccessor, i1.NgSelectOption, i1.ɵNgSelectMultipleOption, i6.OwlDateTimeInputDirective, i6.OwlDateTimeTriggerDirective, i6.OwlDateTimeComponent, i1.CheckboxControlValueAccessor, i1.NumberValueAccessor],\n    pipes: [i5.AsyncPipe, i5.DecimalPipe],\n    styles: [\"\"]\n  });\n  return AdmineventComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}