<div class="hero is-primary is-bold">
  <div class="hero-body">
    <div class="container">
      <div class="columns is-vcentered">
        <div class="column is-two-thirds">
          <h1 class="title"> Registrera poäng / Topplista </h1>
          <h2 class="subtitle">Här kan du registrera dina poäng samt se ledartavlan för pusseljakten.</h2> </div>
      </div>
    </div>
  </div>
</div>

<section class="section" >
  <div class="container">
  <div class="columns">
    <div *ngIf="user" class="column is-half">
        <div *ngIf="submitMode">
          <form [formGroup]="submitCodeForm" (ngSubmit)="submit(submitCodeForm.value)">

            <div class="field">
              <label class="label has-text-primary" for="code">Företagskod</label>
              <input class="input" type="text" placeholder="Skriv in koden du fått av företaget" formControlName="code">
            </div>
            <p class="error-message" *ngIf="showerror">Koden du matat in är inte korrekt. Var vänlig testa igen. Företagskoden har 7 tecken och skulle kunna se ut såhär: "0fb3HJ4"</p>

            <button type="submit" class="button is-fullwidth is-primary" [ngClass]="{'is-loading':loading}" [disabled]="false">Registrera poäng! <span>&nbsp; <i class="fas fa-sign-in-alt"></i></span></button>
          </form>
          </div>

    <div *ngIf="success">
      <div class="notification is-success">
        <h1 class="title is-5">Poängen är registrerad!</h1>
        <p>Du har registrerat poäng från {{ treasureCompany.name }}. Du har nu {{ noOfPoints }} stycken poäng i pusseljakten.</p>
        <br>
        <a class="button is-white" (click)="refresh()">Registrera fler poäng!</a>
      </div>
    </div>

    <div *ngIf="notsuccess">
      <div class="notification is-warning">
        <h1 class="title is-5">Något gick fel!</h1>
        <p>Något gick snett när poängen skulle registreras. Var vänlig försök igen!</p>
        <br>
        <a class="button is-white" (click)="refresh()">Prova igen!</a>
      </div>
    </div>

    <div *ngIf="hasPoint">
      <div class="notification is-info">
        <h1 class="title is-5">Poäng redan registrerad!</h1>
        <p>Du har redan registrerat poäng från {{ treasureCompany.name }}. Försök samla poäng från andra företag!</p>
        <br>
        <a class="button is-white" (click)="refresh()">Ange ny kod!</a>
      </div>
    </div>
    </div>

    <div *ngIf="!user">
      <h1 class="title is-4">Du måste vara inloggad för att kunna registrera poäng till pusseljakten!</h1>
      <a [routerLink]="['../signin']" class="subtitle is-4 has-text-primary has-text-weight-semibold">
        Klicka här för att logga in!
      </a>
    </div>

    <div class="column is-half">
      <p class="has-text-weight-bold has-text-primary"> Topplista: </p>
      <table class="table is-fullwidth">
        <thead>
          <tr>
            <th>Namn:</th>
            <th>Poäng:</th>
          </tr>
        </thead>
        <tfoot>
          <th>Namn:</th>
          <th>Poäng:</th>
        </tfoot>
        <tbody>
          <ng-container *ngFor="let user of leaderBoard">
            <tr>
              <td>{{ user.firstname }} {{ user.lastname }}</td>
              <td>{{ user.noOfPoints }}</td>
            </tr>
          </ng-container>
        </table>
      </div>



    </div>
    </div>
